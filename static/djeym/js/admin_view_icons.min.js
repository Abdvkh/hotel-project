$(document).ready((function(){"use strict";function ajaxGetIcon(ajaxURL,$image,objID){parseInt(objID)?$.getJSON(ajaxURL,{obj_id:objID}).done((function(data){$image.attr("src",data.url).show()})).fail((function(jqxhr,textStatus,error){const err=textStatus+", "+error;let errDetail="";void 0!==jqxhr.responseJSON&&void 0!==jqxhr.responseJSON.detail&&(errDetail=jqxhr.responseJSON.detail),0!==errDetail.length?console.log("Request Failed: "+err+" - "+errDetail):console.log("Request Failed: "+err)})):$image.hide()}if($.expr[":"].regex=function(elem,index,match){const matchParams=match[3].split(","),validLabels=/^(data|css):/,attr={method:matchParams[0].match(validLabels)?matchParams[0].split(":")[0]:"attr",property:matchParams.shift().replace(validLabels,"")},regexFlags="ig",regex=new RegExp(matchParams.join("").replace(/^\s+|\s+$/g,""),"ig");return regex.test($(elem)[attr.method](attr.property))},$("form").is("#map_form")){const textObjs="#id_category_icon, input:regex(id, ^id_presets-.+-icon),input:regex(id, ^id_categories_placemark-.+-category_icon),input:regex(id, ^id_subcategories_placemark-.+-category_icon),input:regex(id, ^id_categories_polyline-.+-category_icon),input:regex(id, ^id_subcategories_polyline-.+-category_icon),input:regex(id, ^id_categories_polygon-.+-category_icon),input:regex(id, ^id_subcategories_polygon-.+-category_icon)",$icon=$(textObjs);$icon.each((function(){const $this=$(this),id=$this.attr("id");/^id_presets-/.test(id)||$this.after('<br><a href="https://materialdesignicons.com/" target="_blank" rel="nofollow noreferrer noopener">MaterialDesignIcons.com</a>'),$this.after('<span class="view_icon"><span class="mdi '+$this.val()+'"></span></span>')})),$(document).on("keyup mouseup mouseout",textObjs,(function(){const $this=$(this);$this.val().length>0&&(/^mdi-/.test($this.val())||$this.val("mdi-"+$this.val()),$this.parent().find(".view_icon").html('<span class="mdi '+$this.val()+'"></span>'))})),$(document).on("click",".add-row a",(function(){const $icon=$(textObjs);$icon.each((function(){const $this=$(this);void 0===$this.parent().find(".view_icon")&&$this.after('<span class="view_icon"></span>')}))}));const $iconCluster=$("#id_icon_cluster");let clusterIconID=$iconCluster.find("option:selected").val();const ajaxClusterIconURL="/djeym/ajax-cluster-icon/",$iconCollection=$("#id_icon_collection"),ajaxExampleIconURL="/djeym/ajax-collection-example-icon/";let collectionIconID=$iconCollection.find("option:selected").val();const $tileSource=$("#id_tile");let tileSourceID=$tileSource.find("option:selected").val();const ajaxTileSourceURL="/djeym/ajax-tile-screenshot/",$iconLoadIndicator=$("#id_load_indicator");let loadIndicatorIconID=$iconLoadIndicator.find("option:selected").val();const ajaxLoadIndicatorIconURL="/djeym/ajax-load-indicator-icon/";0!==$("#id_icon_cluster option:selected").val().length&&0!==$("#id_icon_collection option:selected").val().length||$(".editing_map_link").hide(),$iconCluster.parent().addClass("custom_cluster_icon_wrapper").append('<img src="" id="id_custom_cluster_icon" alt="Cluster Icon">');const $imageClusterIcon=$("#id_custom_cluster_icon");ajaxGetIcon(ajaxClusterIconURL,$imageClusterIcon,clusterIconID),$iconCluster.on("change",(function(){clusterIconID=$(this).find("option:selected").val(),ajaxGetIcon(ajaxClusterIconURL,$imageClusterIcon,clusterIconID)})),$iconCollection.parent().addClass("icon_collection_wrapper").append('<img src="" id="id_collection_example_icon" alt="Example Icon">');const $imageExampleIcon=$("#id_collection_example_icon");ajaxGetIcon(ajaxExampleIconURL,$imageExampleIcon,collectionIconID),$iconCollection.on("change",(function(){collectionIconID=$(this).find("option:selected").val(),ajaxGetIcon(ajaxExampleIconURL,$imageExampleIcon,collectionIconID)})),$tileSource.parent().addClass("tile_screenshot_wrapper").append('<img src="" id="id_tile_screenshot" alt="Screenshot">');const $imageTile=$("#id_tile_screenshot");tileSourceID.length>0?ajaxGetIcon(ajaxTileSourceURL,$imageTile,tileSourceID):$imageTile.attr("src","/static/djeym/img/default_tile.png").show(),$tileSource.on("change",(function(){tileSourceID=$(this).find("option:selected").val(),tileSourceID.length>0?ajaxGetIcon(ajaxTileSourceURL,$imageTile,tileSourceID):$imageTile.attr("src","/static/djeym/img/default_tile.png").show()})),$iconLoadIndicator.parent().addClass("load_indicator_icon_wrapper").append('<img src="" id="id_icon_load_indicator" alt="Icon">');const $imageLoadIndicator=$("#id_icon_load_indicator");ajaxGetIcon(ajaxLoadIndicatorIconURL,$imageLoadIndicator,loadIndicatorIconID),$iconLoadIndicator.on("change",(function(){loadIndicatorIconID=$(this).find("option:selected").val(),ajaxGetIcon(ajaxLoadIndicatorIconURL,$imageLoadIndicator,loadIndicatorIconID)}))}}));