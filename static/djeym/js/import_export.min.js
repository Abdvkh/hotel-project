$(document).ready((function(){"use strict";let TIMEOUT_SPIN_INDICATION;function startLoadIndication(){$("#djeymModalLock").show().find("#djeymLoadIndicator").addClass("djeym-load-indicator"),TIMEOUT_SPIN_INDICATION=setTimeout((function(){"none"!==$("#djeymModalLock").css("display")&&stopLoadIndication()}),3e4)}function stopLoadIndication(){const $modalLock=$("#djeymModalLock");$modalLock.css("opacity","0"),setTimeout((function(){$modalLock.find("#djeymLoadIndicator").removeClass("djeym-load-indicator"),$modalLock.hide().css("opacity",".85"),clearTimeout(TIMEOUT_SPIN_INDICATION)}),1e3)}function sandFormAjax(url,formData){$.ajax({type:"POST",url:url,data:formData,processData:!1,contentType:!1}).done((function(){stopLoadIndication(),document.location.reload(!0)})).fail((function(jqxhr,textStatus,error){const err=textStatus+", "+error;let errDetail="";stopLoadIndication(),void 0!==jqxhr.responseJSON&&void 0!==jqxhr.responseJSON.detail&&(errDetail=jqxhr.responseJSON.detail),0!==errDetail.length?(console.log("Request Failed: "+err+" - "+errDetail),alert("Request Failed: "+err+" - "+errDetail)):(console.log("Request Failed: "+err),alert("Request Failed: "+err))}))}if($("#changelist .actions").css("margin-top","20px"),$("a").is("#id_import_icon_collection")?$("#id_import_file_icon_collection").on("change",(function(){const url=$("#id_import_icon_collection").data("import-url"),collectionFile=$(this)[0].files[0],csrftoken=$('input[name="csrfmiddlewaretoken"').val(),formData=new FormData;formData.append("csrfmiddlewaretoken",csrftoken),formData.append("collection",collectionFile),startLoadIndication(),sandFormAjax(url,formData)})):$("a").is("#id_import_tile_source")&&($("table#result_list tr").length-1>0&&$("#id_export_tile_source").show(),$("#id_import_file_tile_source").on("change",(function(){const url=$("#id_import_tile_source").data("import-url"),sourcesFile=$(this)[0].files[0],csrftoken=$('input[name="csrfmiddlewaretoken"').val(),formData=new FormData;formData.append("csrfmiddlewaretoken",csrftoken),formData.append("sources",sourcesFile),startLoadIndication(),sandFormAjax(url,formData)}))),$("input").is("#id_site")){const $site=$("#id_site");if($site.val().length>0){const url=$site.val(),btn='<div class="tile_go_to_website_btn"><a href="'+url+'" target="_blank" rel="nofollow noreferrer noopener"><img src="/static/djeym/img/arrow_right.svg" alt="Button"></a></div>';$site.after(btn)}}}));